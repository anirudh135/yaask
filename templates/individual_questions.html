{% extends "base.html" %}
{% block head %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="{{ url_for('static', filename='jquery.min.js') }}">\x3C/script>')</script>

<!-- Answer Checking Script -->
<script type='text/javascript' src="{{ url_for('static', filename='anscheck.js') }}">
</script>

<!-- Materialize, note: the js has to be loaded AFTER Jquery -->
<!-- Compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
<!--Let browser know website is optimized for mobile-->
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style type="text/css">
    /* Modal styles */

    nav ul a {
        font-size: 1.5rem;
    }

    .modal .modal-dialog {
        max-width: 400px;
    }

    .modal .modal-header,
    .modal .modal-body {
        padding: 20px 30px;
    }

    .modal .modal-content {
        border-radius: 3px;
    }

    .modal .modal-footer {
        background: #ecf0f1;
        border-radius: 0 0 3px 3px;
    }

    .modal .modal-title {
        display: inline-block;
    }

    .modal .form-control {
        border-radius: 2px;
        box-shadow: none;
        border-color: #dddddd;
    }

    .modal textarea.form-control {
        resize: vertical;
    }

    .modal .btn {
        border-radius: 2px;
        min-width: 100px;
    }

    #crown {
        height: 20px;
        width: 20px;
    }

    .a0, .a1 {
		background-color: lightgray;
		padding: 10px;
		border-radius: 20px;
		transition: .2s ease-out;
		border: 1px solid;
		padding: 10px;
		box-shadow: 5px 10px 8px #888888;
	}

	.ans {
		background-color: rgb(206, 171, 124);
		margin-left: 0em !important;
		margin-right: 0em !important;
		height: 35px;
		border-radius: 12px;
		padding: 0.5rem;
	}

	.a0:hover, .a1:hover {
		box-shadow: 0 3px 10px rgba(0, 0, 0, .2);
		transform: translate3d(0, -4px, 0);
	}
</style>
<!-- Required for the page -->
<script type='text/javascript'>

    //sets the global variable to the prefix to the root of the application
    $SCRIPT_ROOT = {{ request.script_root | tojson | safe }};

</script>
<script type="text/javascript">
    $(document).ready(function () {
        // Activate tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // Select/Deselect checkboxes
        var checkbox = $('table tbody input[type="checkbox"]');
        $("#selectAll").click(function () {
            if (this.checked) {
                checkbox.each(function () {
                    this.checked = true;
                });
            } else {
                checkbox.each(function () {
                    this.checked = false;
                });
            }
        });
        checkbox.click(function () {
            if (!this.checked) {
                $("#selectAll").prop("checked", false);
            }
        });
    });
</script>
  
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<style>
	p{
		display: flex;
	}
	.MathJax_Display{
		margin: 0em 0em!important;
	}
	sup{
		top: 0em;
	}
	sub{
		bottom: -1.75em;
	}
</style>
<title>Quiz - Quizzing Engine</title>
{% endblock head %}
{% block content %}

<!-- Dropdown Structure -->
<ul id="quizdropdown" class="dropdown-content">
    <li><a href="{{ url_for('quiz') }}">All Catgories</a></li>
    <li><a href="{{ url_for('categorywise', category='math') }}">Math</a></li>
    <li><a href="{{ url_for('categorywise', category='physics') }}">physics</a></li>
    <li><a href="{{ url_for('categorywise', category='chemistry') }}">chemistry</a></li>
    <li><a href="{{ url_for('categorywise', category='biology') }}">Biology</a></li>
</ul>
<!-- Since the selectors based on ID and it seems duplicates cause an error -->
<ul id="quizdropdown" class="dropdown-content">
    <li><a href="{{ url_for('quiz') }}">All Catgories</a></li>
    <li><a href="{{ url_for('categorywise', category='math') }}">Math</a></li>
    <li><a href="{{ url_for('categorywise', category='physics') }}">physics</a></li>
    <li><a href="{{ url_for('categorywise', category='chemistry') }}">chemistry</a></li>
    <li><a href="{{ url_for('categorywise', category='biology') }}">Biology</a></li>
</ul>

<!-- NavBar -->

<nav class="#448aff teal accent-4">
    <div class="nav-wrapper">
        <a href="{{ url_for('home') }}" class="brand-logo"> Quiz Engine</a>
        <a href="" data-activates="mobile" class="button-collapse"><i class="material-icons">menu</i></a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a id="userscore" class="center-align teal-text text-darken-4"
                    href="{{ url_for('scoreboard') }}">{% if current_user.name %}
                    Your SCORE is {{ current_user.score }}
                    <img src="/static/img/crown.svg" id="crown">
                    {% endif %}
                </a>
            </li>
            <li><a href="{{ url_for('home') }}">Home</a></li>
            <li class="active"><a class="dropdown-button" href="" data-activates="quizdropdown">Questions<i
                        class="material-icons right">arrow_drop_down</i></a></li>
            <li><a href="{{ url_for('submit') }}">Add Questions</a></li>
            <li><a href="{{ url_for('logout') }}">Logout</a></li>
        </ul>
        <ul id="mobile" class="side-nav">
            <li><a id="userscore" class="center-align teal-text text-darken-4"
                    href="{{ url_for('scoreboard') }}">{% if current_user.name %}
                    Your SCORE is {{ current_user.score }}
                    <img src="/static/img/crown.svg" id="crown">
                    {% endif %}
                </a>
            </li>
            <li><a href="{{ url_for('home') }}">Home</a></li>
            <li class="active"><a class="dropdown-button" href="" data-activates="quizdropdown">Questions<i
                        class="material-icons right">arrow_drop_down</i></a></li>
            <li><a href="{{ url_for('submit') }}">Add Questions</a></li>
            <li><a href="{{ url_for('logout') }}">Logout</a></li>
        </ul>
    </div>
</nav>

{% set qid = [] %}
<h3 class="center-align">List Of Questions</h5>
    <br>
    {% for question_to_display in questions_to_display %}
    <div class="{{ question_to_display.questionid }} a{{(loop.index)%2}}">
        <div style="display: flex;">
            <div style="width: 5%;">
                <div class="row">
                    <div class="col">
                        {{loop.index}}.) &nbsp &nbsp
                    </div>
                </div>
            </div>
            <div style="width: 85%;">
                <div class="row">
                    <div class="col s12">
                        {{ question_to_display.question|safe }}
                    </div>
                </div>
                {% if ((question_to_display.option1=='-1') and (question_to_display.option2=='-1') and (question_to_display.option3=='-1') and (question_to_display.option4=='-1')) %}
                {% else %}           
                    <div class="row">
                        <div class="col s6">
                            A: {{ question_to_display.option1 }}
                        </div>
                        <div class="col s6">
                            B: {{ question_to_display.option2 }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6">
                            C: {{ question_to_display.option3 }}
                        </div>
                        <div class="col s6">
                            D: {{ question_to_display.option4 }}
                        </div>
                    </div>
                {% endif %}
            </div>
            <div style="float: right; width: 10%">
                <a href="">
                    <button style="padding: 2px;">
                        <i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i>
                    </button>
                </a>
                &nbsp
                <a>
                    <button onclick="myFunction('{{question_to_display.questionid}}')" style="padding: 2px;">
                        <i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i>
                    </button>
                </a>
            </div>

        </div>
        <div class="row ans">
            <div class="col" style="padding: ;">
                Correct Answer: {{question_to_display.answer}}
            </div>
        </div>
    </div>
    </br>
    {% endfor %}


    <script>
        function myFunction(x) {
            var r = confirm("Are you sure you want to delete the question?");
            if (r == true) {
                console.log(x);
                var s="/preview?id="+x;
                location.href = s;

            }
            if (r == false) {
                location.href = "/preview";
                console.log("hello ji")
            }
        }
    </script>

    {% endblock content %}

    <!-- Add the ajax answer submission
	Add the logic to exclude the answered questions -->